package :load_machines
package :questions

package :dependencies
package :timezone
package :base

only(:machine_name => 'phil_desktop') { package :virtualbox_guest }

only :roles => :app do
  except(:environment => :development){ package :monit }
  package :dotfiles
  package :git
  package :rbenv
  package :passenger
  package :passenger_nginx
  package :nginx
  package :nginx_logrotate
end

only :roles => :db do
  package :mysql
end

only :roles => :app do
  package :webapps
  except(:environment => :development){ package :postfix }
end

only :user => 'phil' do
  package :usb
  package :sudo_mods
  package :subtle
  sudo install ['chromium-browser']
  package :firefox
  package :gedit
  package :unison
  package :abiword
  package :gnumeric
  package :file_roller
  package :productivity
  package :custom
end

package :finalise

package :save_machines

