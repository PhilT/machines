set daemon 120
set logfile syslog facility log_daemon

set mailserver localhost
set alert <%= AppConf.monit.mailto %>

set httpd port 2812 and
    use address localhost
    allow localhost
    allow <%= AppConf.monit.webserver.address %>
    allow admin:p@ssw0rd

check system localhost
      if loadavg (1min) > 4 then alert
      if loadavg (5min) > 2 then alert
      if memory usage > 80% then alert
      if swap usage > 25% then alert
      if cpu usage (user) > 70% then alert
      if cpu usage (system) > 30% then alert
      if cpu usage (wait) > 20% then alert

<% AppConf.monit.check.paths.split(' ').each do |path| %>
check filesystem rootfs with path <%= path %>
      if space < 5% then alert
<% end %>

include /etc/monit/conf.d/*

